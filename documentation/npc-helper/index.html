<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPC Helper - Complete Documentation</title>
    <meta name="description" content="Complete documentation for NPC Helper - Runtime custom NPC importer for Stardew Valley">
    <meta name="author" content="TamKungZ_">
    <link rel="icon" type="image/x-icon" href="https://tamkungz.github.io/image/icon_hp.png">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/ini.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            900: '#0c4a6e',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        
        .code-block-wrapper { position: relative; }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.375rem;
            color: #cbd5e1;
            font-size: 0.75rem;
            transition: all 0.2s;
            opacity: 0;
            cursor: pointer;
            z-index: 10;
        }
        .code-block-wrapper:hover .copy-btn { opacity: 1; }
        .copy-btn:hover { background: rgba(255, 255, 255, 0.2); color: white; }
        
        .doc-table th { 
            text-align: left; 
            padding: 0.75rem; 
            border-bottom: 1px solid #334155; 
            color: #94a3b8; 
            font-size: 0.875rem; 
            font-weight: 600; 
            text-transform: uppercase; 
            letter-spacing: 0.05em; 
        }
        .doc-table td { 
            padding: 0.75rem; 
            border-bottom: 1px solid #1e293b; 
            color: #cbd5e1; 
            font-size: 0.9rem; 
            vertical-align: top; 
        }
        .doc-table tr:last-child td { border-bottom: none; }
        .doc-table code { 
            background: #1e293b; 
            padding: 0.2rem 0.4rem; 
            border-radius: 0.25rem; 
            color: #38bdf8; 
            font-family: 'JetBrains Mono', monospace; 
            font-size: 0.85em; 
        }
        
        .feature-badge { 
            display: inline-block; 
            padding: 0.125rem 0.5rem; 
            border-radius: 0.25rem; 
            font-size: 0.75rem; 
            font-weight: 600; 
            margin-right: 0.5rem; 
            margin-bottom: 0.5rem; 
        }
        
        .warning-box {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(30, 41, 59, 0.5) 100%);
            border-left: 4px solid #fbbf24;
        }
        
        .info-box {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(30, 41, 59, 0.5) 100%);
            border-left: 4px solid #0ea5e9;
        }
        
        .success-box {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(30, 41, 59, 0.5) 100%);
            border-left: 4px solid #22c55e;
        }
        
        .error-box {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(30, 41, 59, 0.5) 100%);
            border-left: 4px solid #ef4444;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-300 font-sans antialiased selection:bg-brand-500 selection:text-white">

<div class="min-h-screen">
    <!-- Header -->
    <header class="bg-slate-950 border-b border-slate-800">
        <div class="max-w-6xl mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-2 flex items-center gap-3">
                        <span class="w-3 h-3 rounded-full bg-brand-500 animate-pulse"></span>
                        NPC Helper Documentation
                        <span class="text-sm font-normal bg-slate-800 text-slate-300 px-3 py-1 rounded-full">v1.0.1</span>
                    </h1>
                    <p class="text-slate-400">
                        Runtime custom NPC importer for Stardew Valley. Create fully-featured NPCs with TOML configuration.
                    </p>
                </div>
                <div class="flex flex-wrap gap-3">
                    <a href="#quick-start" class="px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded text-sm transition flex items-center gap-2">
                        <i class="fas fa-rocket"></i>
                        Quick Start
                    </a>
                    <a href="https://www.nexusmods.com/stardewvalley/mods/41303" target="_blank" 
                       class="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded text-sm transition flex items-center gap-2">
                        <i class="fas fa-download"></i>
                        Download
                    </a>
                </div>
            </div>
            
            <div class="mt-6 flex flex-wrap gap-3">
                <span class="feature-badge bg-brand-900/50 text-brand-400 border border-brand-500/30">
                    <i class="fas fa-code mr-1"></i> SMAPI 4.0+
                </span>
                <span class="feature-badge bg-slate-800 text-slate-400 border border-slate-700">
                    <i class="fas fa-gamepad mr-1"></i> Stardew Valley 1.6+
                </span>
                <span class="feature-badge bg-purple-900/50 text-purple-400 border border-purple-500/30">
                    <i class="fas fa-users mr-1"></i> Dynamic NPCs
                </span>
                <span class="feature-badge bg-green-900/50 text-green-400 border border-green-500/30">
                    <i class="fas fa-palette mr-1"></i> Asset Variants
                </span>
                <span class="feature-badge bg-yellow-900/50 text-yellow-400 border border-yellow-500/30">
                    <i class="fas fa-globe mr-1"></i> Localization
                </span>
                <span class="feature-badge bg-pink-900/50 text-pink-400 border border-pink-500/30">
                    <i class="fas fa-comments mr-1"></i> Conditional Dialogue
                </span>
            </div>
        </div>
    </header>

    <div class="flex flex-col md:flex-row max-w-6xl mx-auto px-6 py-8 gap-8">
        <!-- Sidebar Navigation -->
        <aside class="w-full md:w-64 flex-shrink-0">
            <div class="sticky top-8 bg-slate-950 rounded-lg border border-slate-800 p-4">
                <h3 class="text-sm font-semibold text-slate-500 uppercase tracking-wider mb-3">Table of Contents</h3>
                <nav class="space-y-2">
                    <a href="#introduction" class="block px-3 py-2 rounded hover:bg-slate-800 hover:text-white transition text-sm">Introduction</a>
                    <a href="#installation" class="block px-3 py-2 rounded hover:bg-slate-800 hover:text-white transition text-sm">Installation</a>
                    <a href="#quick-start" class="block px-3 py-2 rounded hover:bg-slate-800 hover:text-white transition text-sm">Quick Start Guide</a>
                    
                    <div class="pt-2 mt-2 border-t border-slate-800">
                        <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Configuration Files</h4>
                        <a href="#manifest-json" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">manifest.json</a>
                        <a href="#mod-toml" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">mod.toml</a>
                        <a href="#npc-toml" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">NPC Definition</a>
                        <a href="#dialogue-toml" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Dialogue System</a>
                        <a href="#schedule-toml" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Schedule System</a>
                        <a href="#gift-tastes" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Gift Tastes</a>
                    </div>
                    
                    <div class="pt-2 mt-2 border-t border-slate-800">
                        <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Advanced Features</h4>
                        <a href="#asset-variants" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Asset Variants</a>
                        <a href="#localization" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Localization</a>
                        <a href="#conditional-dialogue" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Conditional Dialogue</a>
                        <a href="#api-reference" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">API Reference</a>
                    </div>
                    
                    <div class="pt-2 mt-2 border-t border-slate-800">
                        <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Help & Support</h4>
                        <a href="#troubleshooting" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Troubleshooting</a>
                        <a href="#compatibility" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">Compatibility</a>
                        <a href="#faq" class="block px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition text-sm">FAQ</a>
                    </div>
                </nav>
                
                <div class="mt-6 pt-4 border-t border-slate-800">
                    <div class="text-xs text-slate-500">
                        <p class="mb-2">Requires:</p>
                        <ul class="space-y-1">
                            <li class="flex items-center gap-2">
                                <i class="fas fa-check text-green-400 text-xs"></i>
                                Stardew Valley 1.6+
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fas fa-check text-green-400 text-xs"></i>
                                SMAPI 4.0+
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1">
            <!-- Introduction -->
            <section id="introduction" class="mb-12">
                <h2 class="text-2xl font-bold text-white mb-4">Introduction</h2>
                <p class="text-slate-300 mb-4">
                    NPC Helper is a Stardew Valley mod that allows you to create custom NPCs using simple TOML configuration files. 
                    No C# coding required! The mod provides a complete system for NPC creation including:
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-slate-800/50 rounded-lg p-4">
                        <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                            <i class="fas fa-cog text-brand-400"></i>
                            TOML-Based Configuration
                        </h4>
                        <p class="text-sm text-slate-400">Define NPCs with simple, readable configuration files</p>
                    </div>
                    <div class="bg-slate-800/50 rounded-lg p-4">
                        <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                            <i class="fas fa-comments text-purple-400"></i>
                            Dynamic Dialogue
                        </h4>
                        <p class="text-sm text-slate-400">Conditional and randomized dialogue based on friendship, time, weather, and more</p>
                    </div>
                    <div class="bg-slate-800/50 rounded-lg p-4">
                        <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                            <i class="fas fa-calendar-alt text-green-400"></i>
                            Advanced Schedules
                        </h4>
                        <p class="text-sm text-slate-400">Day/season/date-based routing with automatic pathfinding</p>
                    </div>
                    <div class="bg-slate-800/50 rounded-lg p-4">
                        <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                            <i class="fas fa-images text-yellow-400"></i>
                            Asset Variants
                        </h4>
                        <p class="text-sm text-slate-400">Location and season-specific sprites and portraits</p>
                    </div>
                </div>
            </section>

            <!-- Installation -->
            <section id="installation" class="mb-12">
                <h2 class="text-2xl font-bold text-white mb-4">Installation</h2>
                
                <div class="success-box rounded-lg p-6 mb-6">
                    <h4 class="text-lg font-semibold text-white mb-3">Prerequisites</h4>
                    <ul class="space-y-2 text-slate-300">
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-400"></i>
                            Stardew Valley 1.6 or higher
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-400"></i>
                            SMAPI 4.0 or higher
                        </li>
                    </ul>
                </div>
                
                <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="text-lg font-semibold text-white mb-4">Installation Steps</h4>
                    <ol class="space-y-4">
                        <li class="flex items-start gap-3">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center text-white text-sm font-bold">1</span>
                            <div>
                                <strong class="text-white">Install SMAPI</strong>
                                <p class="text-slate-400 text-sm mt-1">Download and install SMAPI from <a href="https://smapi.io" class="text-brand-400 hover:underline" target="_blank">smapi.io</a></p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center text-white text-sm font-bold">2</span>
                            <div>
                                <strong class="text-white">Download NPC Helper</strong>
                                <p class="text-slate-400 text-sm mt-1">Download the latest version from <a href="https://www.nexusmods.com/stardewvalley/mods/41303" class="text-brand-400 hover:underline" target="_blank">NexusMods</a></p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center text-white text-sm font-bold">3</span>
                            <div>
                                <strong class="text-white">Extract to Mods Folder</strong>
                                <p class="text-slate-400 text-sm mt-1">Extract the NPC Helper folder to <code class="bg-slate-800 px-2 py-1 rounded text-xs">Stardew Valley/Mods/</code></p>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center text-white text-sm font-bold">4</span>
                            <div>
                                <strong class="text-white">Launch Game</strong>
                                <p class="text-slate-400 text-sm mt-1">Start Stardew Valley through SMAPI and check the console for "[NpcHelper] Loaded"</p>
                            </div>
                        </li>
                    </ol>
                </div>
            </section>

            <!-- Quick Start Guide -->
            <section id="quick-start" class="mb-12">
                <h2 class="text-2xl font-bold text-white mb-6">
                    <i class="fas fa-rocket mr-2 text-brand-500"></i>Quick Start Guide
                </h2>
                
                <div class="warning-box rounded-lg p-6 mb-6">
                    <div class="flex items-start gap-3">
                        <i class="fas fa-info-circle text-yellow-400 text-xl mt-1"></i>
                        <div>
                            <h4 class="font-semibold text-white mb-2">Before You Begin</h4>
                            <p class="text-sm text-slate-300">This guide will walk you through creating your first custom NPC. Make sure NPC Helper is installed and working before proceeding.</p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-8">
                    <!-- Step 1 -->
                    <div class="border-l-4 border-brand-500 pl-6">
                        <h3 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="w-8 h-8 rounded-full bg-brand-500 flex items-center justify-center text-sm">1</span>
                            Create Content Pack Structure
                        </h3>
                        <p class="text-slate-400 mb-4">Create the following folder structure in your Mods directory:</p>
                        <div class="bg-slate-950 rounded-lg border border-slate-800 p-4 font-mono text-sm">
<pre class="text-slate-300">Mods/
└── MyFirstNPC/              <span class="text-slate-600">← Your content pack folder</span>
    ├── manifest.json        <span class="text-slate-600">← Required: Mod metadata</span>
    ├── mod.toml            <span class="text-slate-600">← Required: NPC list</span>
    └── NPCs/
        └── Alex/           <span class="text-slate-600">← Example NPC name</span>
            ├── Alex.toml   <span class="text-slate-600">← NPC definition</span>
            ├── sprite.png  <span class="text-slate-600">← Character sprite (16x32 per frame)</span>
            └── portrait.png <span class="text-slate-600">← Portrait (64x64 per expression)</span></pre>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="border-l-4 border-brand-500 pl-6">
                        <h3 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="w-8 h-8 rounded-full bg-brand-500 flex items-center justify-center text-sm">2</span>
                            Create manifest.json
                        </h3>
                        <div class="code-block-wrapper">
                            <button class="copy-btn" data-target="code-manifest-quick">Copy</button>
                            <pre><code id="code-manifest-quick" class="language-json rounded-lg border border-slate-800 shadow-lg p-4">{
  "Name": "My First NPC",
  "Author": "YourName",
  "Version": "1.0.0",
  "Description": "Adds a custom NPC to Stardew Valley",
  "UniqueID": "YourName.MyFirstNPC",
  "ContentPackFor": {
    "UniqueID": "TamKungZ.NpcHelper"
  },
  "UpdateKeys": []
}</code></pre>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="border-l-4 border-brand-500 pl-6">
                        <h3 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="w-8 h-8 rounded-full bg-brand-500 flex items-center justify-center text-sm">3</span>
                            Create mod.toml
                        </h3>
                        <p class="text-slate-400 mb-4">This file tells NPC Helper where to find your NPC definitions:</p>
                        <div class="code-block-wrapper">
                            <button class="copy-btn" data-target="code-modtoml-quick">Copy</button>
                            <pre><code id="code-modtoml-quick" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4">NPCs = ["NPCs/Alex/Alex.toml"]</code></pre>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="border-l-4 border-brand-500 pl-6">
                        <h3 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="w-8 h-8 rounded-full bg-brand-500 flex items-center justify-center text-sm">4</span>
                            Create NPC Definition
                        </h3>
                        <p class="text-slate-400 mb-4">Create <code class="bg-slate-800 px-2 py-1 rounded text-xs">NPCs/Alex/Alex.toml</code> with minimal configuration:</p>
                        <div class="code-block-wrapper">
                            <button class="copy-btn" data-target="code-npc-minimal">Copy</button>
                            <pre><code id="code-npc-minimal" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># Basic Identity
Name = "Alex"
DisplayName = "Alex the Adventurer"
Gender = "male"
Age = "adult"

# Birthday
BirthdaySeason = "spring"
BirthdayDay = 13

# Starting Location
DefaultMap = "Town"
DefaultX = 52
DefaultY = 87
DefaultFacing = 2

# Assets
CustomSpritePath = "sprite.png"
CustomPortraitPath = "portrait.png"</code></pre>
                        </div>
                    </div>

                    <!-- Step 5 -->
                    <div class="border-l-4 border-green-500 pl-6">
                        <h3 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-sm">✓</span>
                            Test Your NPC
                        </h3>
                        <div class="success-box rounded-lg p-4">
                            <ol class="space-y-2 text-sm text-slate-300 list-decimal list-inside">
                                <li>Launch Stardew Valley with SMAPI</li>
                                <li>Check the SMAPI console for "[NpcHelper] Registered NPC definition: Alex"</li>
                                <li>Load or start a save game</li>
                                <li>Look for your NPC at the Town coordinates (52, 87)</li>
                                <li>Interact with them to verify they appear in-game</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>

            <div class="border-t border-slate-800 my-12"></div>

            <!-- Configuration Files -->
            <h2 class="text-2xl font-bold text-white mb-8">Configuration Files</h2>

            <!-- manifest.json -->
            <section id="manifest-json" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-brand-400">manifest.json</h3>
                    <span class="text-xs text-slate-500 font-mono">Required</span>
                </div>
                <p class="text-slate-400 mb-4">This file defines your content pack metadata. Must reference <code>TamKungZ.NpcHelper</code> as the content pack target.</p>
                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-manifest-full">Copy</button>
                    <pre><code id="code-manifest-full" class="language-json rounded-lg border border-slate-800 shadow-lg p-4">{
  "Name": "My Custom NPC Pack",
  "Author": "YourName",
  "Version": "1.0.0",
  "UniqueID": "YourName.MyCustomNPCs",
  "Description": "Adds custom NPCs to Stardew Valley",
  "ContentPackFor": {
    "UniqueID": "TamKungZ.NpcHelper"
  },
  "UpdateKeys": []
}</code></pre>
                </div>
            </section>

            <!-- mod.toml -->
            <section id="mod-toml" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-brand-400">mod.toml</h3>
                    <span class="text-xs text-slate-500 font-mono">Entry Point</span>
                </div>
                <p class="text-slate-400 mb-4">Lists all NPC definition files relative to the content pack root.</p>
                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-mod-toml-full">Copy</button>
                    <pre><code id="code-mod-toml-full" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># List all NPC definition files
NPCs = [
    "NPCs/Rei/Rei.toml",
    "NPCs/Alex/Alex.toml",
    "NPCs/Sophia/Sophia.toml"
]</code></pre>
                </div>
            </section>

            <!-- NPC Definition -->
            <section id="npc-toml" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-blue-400">NPC Definition (.toml)</h3>
                    <span class="text-xs text-slate-500 font-mono">Main Configuration</span>
                </div>
                <p class="text-slate-400 mb-4">The main TOML file that defines an NPC's properties. Place this in your NPC's folder.</p>
                
                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-npc-full">Copy</button>
                    <pre><code id="code-npc-full" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># ───── Basic Identity ─────
Name = "Rei"                    # Internal name (no spaces, unique)
DisplayName = "Rei"             # Name shown to players

# ───── Core Properties ─────
Gender = "female"               # "male" or "female"
Age = "adult"                   # "child", "teen", or "adult"
Manner = "polite"               # "polite", "rude", or "neutral"
SocialAnxiety = "neutral"       # "outgoing", "shy", or "neutral"
Optimism = "positive"           # "positive", "negative", or "neutral"

# ───── Birthday ─────
BirthdaySeason = "summer"       # "spring", "summer", "fall", or "winter"
BirthdayDay = 12                # 1-28

# ───── Spawn Location ─────
HomeRegion = "Town"             # Region for game logic
DefaultMap = "Hospital"         # Starting map
DefaultX = 9                    # X tile coordinate
DefaultY = 7                    # Y tile coordinate
DefaultFacing = 2               # 0=Up, 1=Right, 2=Down, 3=Left

# ───── Relationship Flags ─────
Datable = true                  # Can be dated
Marriageable = true             # Can be married

# ───── Asset Paths ─────
CustomSpritePath = "sprite.png"             # Default sprite
CustomPortraitPath = "portrait.png"         # Default portrait

# ───── External Files ─────
DialoguePath = "Dialogue.toml"              # Separate dialogue file
SchedulePath = "Schedule.toml"              # Separate schedule file

# ───── Sprite Variants ─────
[Sprites]
Hospital = "sprite_Hospital.png"           # When at Hospital
Beach = "sprite_Beach.png"                 # When at Beach
summer = "sprite_Summer.png"               # During summer
rainy = "sprite_Rainy.png"                 # When raining

# ───── Portrait Variants ─────
[Portraits]
Hospital = "portrait_Hospital.png"         # When at Hospital
summer = "portrait_Summer.png"             # During summer

# ───── Gift Tastes ─────
[GiftTastes]
# Item IDs or names (supports universal keys like "Universal_Love")
Love = ["Diamond", "Coffee", "Universal_Love"]
Like = ["Blueberry", "Universal_Like"]
Neutral = ["Universal_Neutral"]
Dislike = ["Universal_Dislike"]
Hate = ["Universal_Hate"]</code></pre>
                </div>

                <div class="mt-6 bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="text-lg font-semibold text-white mb-4">Allowed Values Reference</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full doc-table">
                            <thead>
                                <tr class="bg-slate-900">
                                    <th class="w-1/4">Property</th>
                                    <th class="w-1/4">Allowed Values</th>
                                    <th class="w-1/2">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>Gender</code></td>
                                    <td><code>"male"</code>, <code>"female"</code></td>
                                    <td>Determines pronouns and base sound effects</td>
                                </tr>
                                <tr>
                                    <td><code>Age</code></td>
                                    <td><code>"child"</code>, <code>"teen"</code>, <code>"adult"</code></td>
                                    <td>Affects walking speed, height, and events</td>
                                </tr>
                                <tr>
                                    <td><code>Manner</code></td>
                                    <td><code>"neutral"</code>, <code>"polite"</code>, <code>"rude"</code></td>
                                    <td>Changes speech bubble shape and default reactions</td>
                                </tr>
                                <tr>
                                    <td><code>SocialAnxiety</code></td>
                                    <td><code>"neutral"</code>, <code>"outgoing"</code>, <code>"shy"</code></td>
                                    <td>Affects idle animations and social behavior</td>
                                </tr>
                                <tr>
                                    <td><code>Optimism</code></td>
                                    <td><code>"neutral"</code>, <code>"positive"</code>, <code>"negative"</code></td>
                                    <td>General personality bias</td>
                                </tr>
                                <tr>
                                    <td><code>BirthdaySeason</code></td>
                                    <td><code>"spring"</code>, <code>"summer"</code>, <code>"fall"</code>, <code>"winter"</code></td>
                                    <td>Season of NPC's birthday</td>
                                </tr>
                                <tr>
                                    <td><code>DefaultFacing</code></td>
                                    <td><code>0</code>, <code>1</code>, <code>2</code>, <code>3</code></td>
                                    <td>0: Up, 1: Right, 2: Down, 3: Left</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Dialogue System -->
            <section id="dialogue-toml" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-purple-400">Dialogue System</h3>
                    <span class="text-xs text-slate-500 font-mono">Follows Stardew Valley Standards</span>
                </div>
                
                <div class="bg-blue-900/30 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg">
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-200">
                                NPC Helper uses <strong>Stardew Valley's native dialogue system</strong>. All dialogue keys and formats must follow the official Stardew Valley format. 
                                <a href="https://stardewvalleywiki.com/Modding:Dialogue" target="_blank" class="text-blue-300 underline hover:text-white font-semibold">
                                    View complete documentation on Stardew Valley Wiki ↗
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                
                <p class="text-slate-400 mb-4">
                    Dialogue is defined in TOML files using Stardew Valley's standard key system. NPC Helper passes dialogue directly to the game engine, which handles all conditional logic and selection.
                </p>
                
                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-dialogue-example">Copy</button>
                    <pre><code id="code-dialogue-example" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4">[Dialogue]
# Basic dialogue keys (following Stardew Valley format)
Introduction = "Hi, I'm Rei. Nice to meet you!"

# Day of week
Mon = "Mondays are tough, but we'll get through it."
Tue = "Tuesday already? Time flies."

# Heart levels (Stardew Valley uses numeric suffixes)
2 = "You're becoming a familiar face."
4 = "Good to see you again!"
6 = "I'm glad we're friends."

# Location-based (when NPC is at these locations)
Hospital = "I'm on duty today. Please don't distract me too much."
Town = "The town looks peaceful today."

# Seasonal dialogue
spring_1 = "Spring is finally here!"
winter_24 = "Happy Winter Star!"

# Time-based (using game's time format)
Town_2000 = "It's getting late. You should head home soon."

# Weekly rotation (Stardew Valley's || operator)
Greeting = "Hello! || Hi there! || Good to see you!"

# Festival dialogue (must match festival names)
EggFestival = "Egg hunting isn't really my thing."
FlowerDance = "The flowers are beautiful this year."

# Using Stardew Valley dialogue commands
Question = "$q 100/101 Do you like medicine?#$b#I'm just curious."
AnswerYes = "$r 100 10 Yes, I find it fascinating!"
AnswerNo = "$r 101 0 Not really, it's not for me."

# Special dialogue keys
breakUp = "This is for the best..."
divorced = "Please, just leave me alone."
AcceptGift_Loved = "This is wonderful! Thank you!"
AcceptGift_Liked = "Thanks, I appreciate it."</code></pre>
                </div>
            
                <div class="mt-6 bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold text-white">Dialogue Key Reference (Stardew Valley Format)</h4>
                        <a href="https://stardewvalleywiki.com/Modding:Dialogue" target="_blank" class="text-xs text-purple-400 hover:text-purple-300 underline">
                            View Full Reference
                        </a>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Standard Dialogue Keys</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>Introduction</code> - First meeting dialogue</li>
                                <li><code>Mon</code>, <code>Tue</code>, etc. - Day of week</li>
                                <li><code>2</code>, <code>4</code>, <code>6</code> - Heart levels</li>
                                <li><code>spring_1</code> - Seasonal (season_day)</li>
                                <li><code>Hospital</code>, <code>Town</code> - Location-specific</li>
                                <li><code>Hospital_Tue</code> - Location + day combination</li>
                                <li><code>Town_2000</code> - Location + time combination</li>
                                <li><code>EggFestival</code> - Festival-specific</li>
                                <li><code>Default</code> - Fallback dialogue</li>
                            </ul>
                            
                            <div class="mt-4 p-3 bg-slate-900/50 rounded border border-slate-700">
                                <h6 class="text-xs font-semibold text-slate-400 uppercase mb-1">Key Priority Order</h6>
                                <p class="text-xs text-slate-300">
                                    Stardew Valley checks keys in this order: <span class="text-blue-300">Location-specific → Seasonal → Heart level → Day of week → Generic</span>
                                </p>
                            </div>
                        </div>
                        
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Special Keys & Commands</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>breakUp</code> - After breaking up</li>
                                <li><code>divorced</code> - After divorce</li>
                                <li><code>AcceptGift_Loved</code> - Gift reactions</li>
                                <li><code>AcceptGift_Liked</code> - Gift reactions</li>
                                <li><code>RejectBouquet</code> - Rejecting bouquet</li>
                                <li><code>DumpsterDiveComment</code> - When player digs in trash</li>
                                <li><code>$h</code>, <code>$s</code>, <code>$u</code> - Portrait emotes</li>
                                <li><code>$q</code> - Question dialogue</li>
                                <li><code>$r</code> - Response options</li>
                                <li><code>||</code> - Weekly rotation separator</li>
                                <li><code>@</code> - Player name replacement</li>
                                <li><code>${male^female}</code> - Gender-specific text</li>
                            </ul>
                            
                            <div class="mt-4 p-3 bg-slate-900/50 rounded border border-slate-700">
                                <h6 class="text-xs font-semibold text-slate-400 uppercase mb-1">Note on Conditions</h6>
                                <p class="text-xs text-slate-300">
                                    <span class="text-amber-300">[condition] syntax is NOT supported.</span> Use Stardew Valley's built-in key system instead. Example: Instead of <code>[friendship >= 4]</code>, use <code>4</code> or <code>Mon4</code>.
                                </p>
                            </div>
                        </div>
                    </div>
        
                    <div class="mt-6 pt-6 border-t border-slate-800">
                        <h5 class="font-semibold text-brand-400 mb-3">Example Conversion from Old to New Format</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-red-900/20 p-4 rounded border border-red-800/50">
                                <h6 class="text-sm font-semibold text-red-300 mb-2">Old Format (Not Supported)</h6>
                                <pre class="text-xs text-red-200 whitespace-pre-wrap">[friendship >= 6] Hello friend! || Hi there.
[time >= 1800] Good evening! || Hello.
[season = summer] It's hot today!</pre>
                            </div>
                            <div class="bg-green-900/20 p-4 rounded border border-green-800/50">
                                <h6 class="text-sm font-semibold text-green-300 mb-2">New Format (Stardew Valley)</h6>
                                <pre class="text-xs text-green-200 whitespace-pre-wrap">6 = "Hello friend!"
Default = "Hi there."
Town_1800 = "Good evening!"
Town = "Hello."
summer = "It's hot today!"</pre>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-purple-900/20 rounded-lg border border-purple-800 p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h5 class="font-semibold text-purple-300">Important Migration Notice</h5>
                            <p class="text-sm text-purple-200 mt-1">
                                If you have existing NPCs using the old <code>[condition]</code> syntax, you must convert them to Stardew Valley format. 
                                Use the <code>DialogueConverter</code> tool or manually update your TOML files.
                            </p>
                            <div class="mt-2">
                                <a href="#dialogue-converter" class="text-xs text-purple-300 hover:text-white underline">
                                    View Dialogue Converter Tool →
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Schedule System -->
            <section id="schedule-toml" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-pink-400">Schedule System</h3>
                    <span class="text-xs text-slate-500 font-mono">Day/Season Filtering</span>
                </div>
                <p class="text-slate-400 mb-4">
                    Define NPC movement patterns throughout the day. Schedules can be filtered by day, season, or specific dates.
                </p>
                
                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-schedule-example">Copy</button>
                    <pre><code id="code-schedule-example" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># Separate Schedule.toml file structure

# ───── Weekday Schedule (Mon-Fri) ─────
[[Schedule]]
Time = 600              # 6:00 AM
Map = "Hospital"
X = 1
Y = 18
Facing = 2              # Facing down
Days = "Weekday"        # Monday through Friday

[[Schedule]]
Time = 1200             # 12:00 PM
Map = "Town"
X = 29
Y = 54
Facing = 2
Days = "Weekday"
Action = "Having lunch" # Optional description

[[Schedule]]
Time = 1800             # 6:00 PM
Map = "Hospital"
X = 13
Y = 5
Facing = 0              # Facing up
Days = "Weekday"

# ───── Weekend Schedule (Sat-Sun) ─────
[[Schedule]]
Time = 900              # 9:00 AM
Map = "Beach"
X = 20
Y = 20
Facing = 2
Days = "Weekend"        # Saturday and Sunday

[[Schedule]]
Time = 1700             # 5:00 PM
Map = "Saloon"
X = 21
Y = 17
Facing = 1
Days = "Weekend"

# ───── Specific Day Schedule ─────
[[Schedule]]
Time = 1000             # 10:00 AM
Map = "ArchaeologyHouse"
X = 15
Y = 8
Facing = 2
Season = "spring"
Day = 1                 # Only on Spring 1

# ───── Birthday Schedule ─────
[[Schedule]]
Time = 1400             # 2:00 PM
Map = "Saloon"
X = 21
Y = 17
Season = "summer"       # Rei's birthday is Summer 12
Day = 12

# ───── Specific Days of Week ─────
[[Schedule]]
Time = 800
Map = "Forest"
X = 45
Y = 32
Facing = 2
Days = "Mon,Wed,Fri"    # Only on Monday, Wednesday, Friday</code></pre>
                </div>

                <div class="mt-6 bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="text-lg font-semibold text-white mb-4">Schedule Filter Options</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Day Filters</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>Days = "Weekday"</code> - Monday through Friday</li>
                                <li><code>Days = "Weekend"</code> - Saturday and Sunday</li>
                                <li><code>Days = "Mon,Tue,Wed"</code> - Specific days</li>
                                <li><code>Days = "Mon,Wed,Fri"</code> - Multiple specific days</li>
                                <li>No <code>Days</code> filter = applies every day</li>
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Date Filters</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>Season = "spring"</code> - Only in spring</li>
                                <li><code>Day = 12</code> - Only on day 12 of month</li>
                                <li><code>Season = "winter", Day = 24</code> - Only on Winter 24</li>
                                <li>No filters = applies every day of matching season</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gift Tastes -->
            <section id="gift-tastes" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-yellow-400">Gift Tastes System</h3>
                    <span class="text-xs text-slate-500 font-mono">Stardew Valley Gift System</span>
                </div>
                
                <div class="bg-amber-900/30 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg">
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-amber-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-amber-200">
                                <span class="font-semibold">⚠️ Breaking Change:</span> The <code>LoveMessage</code>, <code>LikeMessage</code> etc. in <code>[GiftTastes]</code> are 
                                <strong class="text-white">no longer supported</strong>. Gift response messages must now be defined in <code>Dialogue.toml</code> using 
                                <code>AcceptGift_*</code> keys following Stardew Valley's standard format.
                            </p>
                        </div>
                    </div>
                </div>
                
                <p class="text-slate-400 mb-4">
                    Define what items your NPC loves, likes, is neutral about, dislikes, or hates using Stardew Valley's gift system.
                    Gift response messages are defined separately in the dialogue file.
                </p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3">Main NPC TOML File</h4>
                        <div class="code-block-wrapper">
                            <button class="copy-btn" data-target="code-gift-tastes">Copy</button>
                            <pre><code id="code-gift-tastes" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># In your main NPC TOML file (e.g., Rei.toml)

[GiftTastes]
# Use item names, qualified IDs, or universal categories
Love = [
    "Diamond",                  # Specific item name
    "(O)395",                   # Qualified item ID (Coffee)
    "Starfruit",                # Another specific item
    # "Universal_Love"          # Optional: Include universal loves
]

Like = [
    "Blueberry",
    "Coconut",
    "Salmon",
    "Cheese"
    # "Universal_Like"         # Optional: Include universal likes
]

Neutral = [
    "Stone",
    "Wood",
    "Wheat"
    # "Universal_Neutral"      # Optional: Include universal neutrals
]

Dislike = [
    "Clay",
    "Copper Ore",
    "Algae"
    # "Universal_Dislike"      # Optional: Include universal dislikes
]

Hate = [
    "Joja Cola",
    "Trash",
    "Broken Glasses"
    # "Universal_Hate"         # Optional: Include universal hates
]

# ⚠️ DEPRECATED - DO NOT USE:
# LoveMessage = "Old format - no longer works!"
# LikeMessage = "Use AcceptGift_* in Dialogue.toml instead"</code></pre>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3">Dialogue TOML File</h4>
                        <div class="code-block-wrapper">
                            <button class="copy-btn" data-target="code-gift-responses">Copy</button>
                            <pre><code id="code-gift-responses" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># In Dialogue.toml - Gift response messages
# These keys must follow Stardew Valley's standard format

# Regular gift reactions
AcceptGift_Loved = "Oh wow! Is this for me? I love it! $h"
AcceptGift_Liked = "Thanks! This is nice. I appreciate it. $h"
AcceptGift_Neutral = "Thank you."
AcceptGift_Disliked = "Oh... um, thanks? $u"
AcceptGift_Hated = "Eww, why would you give me this? $a"

# Birthday gift reactions (override for birthday)
AcceptBirthdayGift_Loved = "You remembered my birthday! This is amazing! $h"
AcceptBirthdayGift = "A birthday gift? Thank you! $h"

# Optional: Specific item reactions
AcceptGift_(O)72 = "A diamond! How extravagant... $h"      # Diamond
AcceptGift_Coffee = "Coffee! Exactly what I needed. $h"     # Coffee
AcceptGift_(O)395 = "More coffee? You know me too well. $h" # Coffee by ID

# Optional: Context tag reactions
AcceptGift_category_gem = "A gemstone! Very thoughtful. $h"
AcceptGift_category_cooking = "Homemade food? You shouldn't have! $h"</code></pre>
                        </div>
                    </div>
                </div>
            
                <div class="mt-6 bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="text-lg font-semibold text-white mb-4">Gift System Reference</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Item Reference Formats</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>"Diamond"</code> - Item name (works for most unique items)</li>
                                <li><code>"(O)72"</code> - Qualified item ID (Object 72 = Diamond)</li>
                                <li><code>"(O)Starfruit"</code> - Qualified ID with internal name</li>
                                <li><code>"(BC)17"</code> - Building/other item types</li>
                                <li><code>"Universal_Love"</code> - All universally loved items</li>
                                <li><code>"category_fruit"</code> - All fruits (context tag)</li>
                                <li><code>"category_gem"</code> - All gems (context tag)</li>
                            </ul>
                            
                            <div class="mt-4 p-3 bg-slate-900/50 rounded border border-slate-700">
                                <h6 class="text-xs font-semibold text-slate-400 uppercase mb-1">Finding Item IDs</h6>
                                <p class="text-xs text-slate-300">
                                    Use <code>CJB Item Spawner</code> mod or check the 
                                    <a href="https://stardewvalleywiki.com/Modding:Item_IDs" target="_blank" class="text-blue-300 hover:text-white underline">
                                        Stardew Valley Item IDs wiki
                                    </a> for reference.
                                </p>
                            </div>
                        </div>
                        
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">Response Message Keys</h5>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><code>AcceptGift_Loved</code> - Loved gifts (+80 friendship)</li>
                                <li><code>AcceptGift_Liked</code> - Liked gifts (+45 friendship)</li>
                                <li><code>AcceptGift_Neutral</code> - Neutral gifts (+20 friendship)</li>
                                <li><code>AcceptGift_Disliked</code> - Disliked gifts (-20 friendship)</li>
                                <li><code>AcceptGift_Hated</code> - Hated gifts (-40 friendship)</li>
                                <li><code>AcceptBirthdayGift_*</code> - Birthday-specific responses</li>
                                <li><code>AcceptGift_(O)72</code> - Specific item responses</li>
                                <li><code>AcceptGift_category_gem</code> - Category responses</li>
                            </ul>
                            
                            <div class="mt-4 p-3 bg-slate-900/50 rounded border border-slate-700">
                                <h6 class="text-xs font-semibold text-slate-400 uppercase mb-1">Priority Order</h6>
                                <p class="text-xs text-slate-300">
                                    Stardew Valley checks: <span class="text-green-300">Specific item → Context tag → Gift taste → Default</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 pt-6 border-t border-slate-800">
                        <h5 class="font-semibold text-brand-400 mb-3">Migration Guide: Old → New Format</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-red-900/20 p-4 rounded border border-red-800/50">
                                <h6 class="text-sm font-semibold text-red-300 mb-2">Old Format (Deprecated)</h6>
                                <pre class="text-xs text-red-200 whitespace-pre-wrap"># In main NPC TOML:
[GiftTastes]
Love = ["Diamond", "Coffee"]
LoveMessage = "I love this! $h"
LikeMessage = "Thanks! $h"

# Dialogue.toml had regular dialogue only</pre>
                            </div>
                            <div class="bg-green-900/20 p-4 rounded border border-green-800/50">
                                <h6 class="text-sm font-semibold text-green-300 mb-2">New Format (Required)</h6>
                                <pre class="text-xs text-green-200 whitespace-pre-wrap"># In main NPC TOML:
[GiftTastes]
Love = ["Diamond", "Coffee"]
Like = ["Blueberry", "Coconut"]
# NO Message keys here!

# In Dialogue.toml:
AcceptGift_Loved = "I love this! $h"
AcceptGift_Liked = "Thanks! $h"
AcceptBirthdayGift = "A birthday gift! $h"</pre>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-blue-900/20 rounded-lg border border-blue-800 p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h5 class="font-semibold text-blue-300">How the System Works</h5>
                            <ul class="text-sm text-blue-200 mt-2 space-y-1">
                                <li>• <strong>GiftTastes</strong> in main TOML → Defines what items NPC likes/dislikes</li>
                                <li>• <strong>AcceptGift_*</strong> in Dialogue.toml → Defines what NPC says when receiving gifts</li>
                                <li>• Stardew Valley engine → Handles friendship points, birthday bonuses, and response selection</li>
                                <li>• The two systems work together seamlessly when both are properly configured</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <div class="border-t border-slate-800 my-12"></div>

            <!-- Advanced Features -->
            <h2 class="text-2xl font-bold text-white mb-8">Advanced Features</h2>

            <!-- Asset Variants -->
            <section id="asset-variants" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-green-400">Asset Variants</h3>
                    <span class="text-xs text-slate-500 font-mono">Dynamic Sprites & Portraits</span>
                </div>
                <p class="text-slate-400 mb-4">
                    NPC Helper automatically switches sprites and portraits based on location, season, weather, or custom conditions.
                    The system checks for variants in this priority order:
                </p>
                
                <div class="bg-slate-950 rounded-lg border border-slate-800 p-4 mb-6">
                    <ol class="text-sm text-slate-300 list-decimal list-inside space-y-2">
                        <li><strong>NPC's current location</strong> (e.g., "Hospital", "Beach")</li>
                        <li><strong>Current season</strong> ("spring", "summer", "fall", "winter")</li>
                        <li><strong>Custom sprite/portrait path</strong> from TOML</li>
                        <li><strong>Default sprite.png/portrait.png</strong> in NPC folder</li>
                    </ol>
                </div>

                <div class="code-block-wrapper mb-6">
                    <button class="copy-btn" data-target="code-asset-variants">Copy</button>
                    <pre><code id="code-asset-variants" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># In your main NPC TOML file

[Sprites]
# Location-based variants
Hospital = "sprite_Hospital.png"     # When NPC is at Hospital
Beach = "sprite_Beach.png"           # When at Beach
Saloon = "sprite_Saloon.png"         # When at Saloon

# Season-based variants
spring = "sprite_Spring.png"
summer = "sprite_Summer.png"
fall = "sprite_Fall.png"
winter = "sprite_Winter.png"

# Weather-based variants
rainy = "sprite_Rainy.png"
snow = "sprite_Snow.png"

# Special occasion variants
festival = "sprite_Festival.png"
birthday = "sprite_Birthday.png"

[Portraits]
# Same structure for portraits
Hospital = "portrait_Hospital.png"
summer = "portrait_Summer.png"
rainy = "portrait_Rainy.png"
festival = "portrait_Festival.png"</code></pre>
                </div>

                <div class="info-box rounded-lg p-6">
                    <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                        <i class="fas fa-info-circle text-blue-400"></i>
                        Asset Requirements
                    </h4>
                    <ul class="text-sm text-slate-300 space-y-2">
                        <li><strong>Sprites:</strong> 16x32 pixels per frame (standard Stardew NPC size)</li>
                        <li><strong>Portraits:</strong> 64x64 pixels per expression</li>
                        <li><strong>Format:</strong> PNG recommended (supports transparency)</li>
                        <li><strong>Paths:</strong> Relative to the NPC's folder, or absolute paths</li>
                        <li><strong>Naming:</strong> File names are case-sensitive on some systems</li>
                    </ul>
                </div>
            </section>

            <!-- Localization -->
            <section id="localization" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-yellow-400">Localization</h3>
                    <span class="text-xs text-slate-500 font-mono">Multi-language Support</span>
                </div>
                <p class="text-slate-400 mb-4">
                    NPC Helper automatically loads localized versions of your TOML files based on the game's current language.
                    Create a <code>locale</code> folder in your NPC's directory with language-specific TOML files.
                </p>
                
                <div class="bg-slate-950 rounded-lg border border-slate-800 p-4 mb-6 font-mono text-sm">
<pre class="text-slate-300">NPCs/
└── Rei/
    ├── Rei.toml                    <span class="text-slate-600"># Default (English) definition</span>
    ├── sprite.png
    ├── portrait.png
    └── locale/                     <span class="text-slate-600"># Localization folder</span>
        ├── es-ES/                  <span class="text-slate-600"># Spanish (Spain)</span>
        │   └── Rei.toml            <span class="text-slate-600"># Spanish translation</span>
        ├── fr-FR/                  <span class="text-slate-600"># French</span>
        │   └── Rei.toml
        └── de/                     <span class="text-slate-600"># German (generic)</span>
            └── Rei.toml</pre>
                </div>

                <div class="code-block-wrapper">
                    <button class="copy-btn" data-target="code-localization">Copy</button>
                    <pre><code id="code-localization" class="language-ini rounded-lg border border-slate-800 shadow-lg p-4"># locale/es-ES/Rei.toml - Spanish translation
# Only include properties that need translation

DisplayName = "Rei"  # Spanish display name

[Dialogue]
Introduction = "Hola. Soy Rei, médico en prácticas en la clínica."
Mon = "Los lunes no me asustan. Solo necesitan el café adecuado."
Default = "Si me necesitas, estoy en la clínica."

# Gift messages can also be localized
LoveMessage = "¡Oh, vaya! ¿Esto es para mí? ¡Me encanta!"
LikeMessage = "¡Gracias! Esto está bien."
DislikeMessage = "Oh... um, ¿gracias?"</code></pre>
                </div>

                <div class="mt-6 info-box rounded-lg p-6">
                    <h4 class="font-semibold text-white mb-2 flex items-center gap-2">
                        <i class="fas fa-language text-blue-400"></i>
                        How Localization Works
                    </h4>
                    <ul class="text-sm text-slate-300 space-y-2">
                        <li><strong>Locale Detection:</strong> Uses <code>helper.Translation.Locale</code> (e.g., "es-ES", "fr-FR")</li>
                        <li><strong>Fallback:</strong> If "es-ES" folder doesn't exist, tries "es" folder</li>
                        <li><strong>Overlay System:</strong> Localized TOML merges with base definition</li>
                        <li><strong>Automatic:</strong> No code needed - just create locale folders</li>
                        <li><strong>Cache Invalidation:</strong> Assets automatically reload when language changes</li>
                    </ul>
                </div>
            </section>

            <!-- API Reference -->
            <section id="api-reference" class="mb-12">
                <div class="flex justify-between items-baseline mb-3">
                    <h3 class="text-xl font-semibold text-blue-400">API Reference</h3>
                    <span class="text-xs text-slate-500 font-mono">For Mod Developers</span>
                </div>
                <p class="text-slate-400 mb-4">
                    Other mods can programmatically register NPCs with NPC Helper using the provided API interface.
                </p>

                <div class="code-block-wrapper mb-6">
                    <button class="copy-btn" data-target="code-api-usage">Copy</button>
                    <pre><code id="code-api-usage" class="language-csharp rounded-lg border border-slate-800 shadow-lg p-4">using StardewModdingAPI;
using NpcHelper;

public class MyMod : Mod
{
    public override void Entry(IModHelper helper)
    {
        // Get the NPC Helper API
        var npcHelper = helper.ModRegistry.GetApi<INpcHelperApi>("TamKungZ.NpcHelper");
        
        if (npcHelper != null)
        {
            // Create NPC definition programmatically
            var customNpc = new NpcDefinition
            {
                DisplayName = "Programmatic NPC",
                Gender = "female",
                Age = "adult",
                DefaultMap = "Town",
                DefaultX = 35,
                DefaultY = 42,
                DefaultFacing = 2,
                Datable = true,
                Marriageable = false
            };
            
            // Add dialogue
            customNpc.Dialogue["Introduction"] = "Hello from code!";
            customNpc.Dialogue["Mon"] = "Monday dialogue from API.";
            
            // Add gift tastes
            customNpc.GiftTastes["Love"] = new List<string> { "Diamond", "Prismatic Shard" };
            customNpc.GiftTastes["Hate"] = new List<string> { "Joja Cola" };
            
            // Register the NPC
            npcHelper.RegisterNpc("CustomNPC", customNpc);
        }
    }
}</code></pre>
                </div>

                <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="font-semibold text-white mb-4">API Interface</h4>
                    <div class="space-y-4">
                        <div>
                            <h5 class="font-semibold text-brand-400 mb-2">INpcHelperApi Interface</h5>
                            <div class="code-block-wrapper">
                                <button class="copy-btn" data-target="code-api-interface">Copy</button>
                                <pre><code id="code-api-interface" class="language-csharp rounded-lg border border-slate-800 shadow-lg p-4">public interface INpcHelperApi
{
    /// <summary>
    /// Register a new NPC programmatically
    /// </summary>
    /// <param name="name">Unique NPC name (no spaces)</param>
    /// <param name="data">NPC definition data</param>
    void RegisterNpc(string name, NpcDefinition data);
}

// Implementation in ModEntry.cs
public class NpcHelperApi : INpcHelperApi
{
    private readonly NpcManager _manager;
    public NpcHelperApi(NpcManager manager) => _manager = manager;

    public void RegisterNpc(string name, NpcDefinition data)
    {
        data.Name = name;
        _manager.Register(data);
    }
}</code></pre>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-slate-900 rounded p-4">
                                <h6 class="font-semibold text-white mb-2">Requirements</h6>
                                <ul class="text-xs text-slate-300 space-y-1">
                                    <li>NPC Helper must be installed</li>
                                    <li>Mod must reference NpcHelper namespace</li>
                                    <li>MinimumApiVersion: "4.0.0"</li>
                                    <li>UniqueID: "TamKungZ.NpcHelper"</li>
                                </ul>
                            </div>
                            <div class="bg-slate-900 rounded p-4">
                                <h6 class="font-semibold text-white mb-2">Limitations</h6>
                                <ul class="text-xs text-slate-300 space-y-1">
                                    <li>Assets must be loaded via SMAPI's content API</li>
                                    <li>No direct access to NPC instances</li>
                                    <li>Schedule execution handled by NPC Helper</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="border-t border-slate-800 my-12"></div>

            <!-- Help & Support -->
            <h2 class="text-2xl font-bold text-white mb-8">Help & Support</h2>

            <!-- Troubleshooting -->
            <section id="troubleshooting" class="mb-12">
                <h3 class="text-xl font-bold text-white mb-6">Troubleshooting</h3>
                
                <div class="space-y-6">
                    <div class="error-box rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-red-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-user-slash"></i>
                            NPC Not Appearing in Game
                        </h4>
                        <ul class="text-sm text-slate-300 space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">•</span>
                                <span><strong>Check SMAPI Log:</strong> Look for "[NpcHelper]" messages. Missing logs mean the mod isn't loading.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">•</span>
                                <span><strong>Verify manifest.json:</strong> Ensure <code>ContentPackFor.UniqueID</code> is exactly <code>"TamKungZ.NpcHelper"</code></span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">•</span>
                                <span><strong>Check mod.toml:</strong> Verify the path in <code>NPCs = ["..."]</code> is correct and file exists.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">•</span>
                                <span><strong>DefaultMap exists:</strong> Ensure the map name in <code>DefaultMap</code> exists in your game version.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-400">•</span>
                                <span><strong>NPC name conflict:</strong> Ensure NPC <code>Name</code> doesn't conflict with vanilla or other mod NPCs.</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="warning-box rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-yellow-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-comment-alt"></i>
                            Dialogue Not Showing or Incorrect
                        </h4>
                        <ul class="text-sm text-slate-300 space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-400">•</span>
                                <span><strong>Dialogue keys:</strong> Verify keys match Stardew's expected format (Mon, Tue, Introduction, etc.)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-400">•</span>
                                <span><strong>Condition syntax:</strong> Ensure conditions use correct syntax: <code>[friendship >= 4] Text</code></span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-400">•</span>
                                <span><strong>TOML header:</strong> Dialogue in separate files needs <code>[Dialogue]</code> header</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-400">•</span>
                                <span><strong>Cache issue:</strong> Try clearing SMAPI cache or restarting the game</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-yellow-400">•</span>
                                <span><strong>Test without conditions:</strong> First test simple dialogue without conditions</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="info-box rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-blue-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-image"></i>
                            Assets Not Loading (Red Question Mark)
                        </h4>
                        <ul class="text-sm text-slate-300 space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-blue-400">•</span>
                                <span><strong>File format:</strong> Ensure images are PNG format with transparency</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-blue-400">•</span>
                                <span><strong>Dimensions:</strong> Sprites: 16x32 per frame, Portraits: 64x64 per expression</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-blue-400">•</span>
                                <span><strong>File paths:</strong> Check TOML paths are correct relative to TOML file location</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-blue-400">•</span>
                                <span><strong>Case sensitivity:</strong> File names are case-sensitive on Linux/Mac</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-blue-400">•</span>
                                <span><strong>SMAPI cache:</strong> Clear SMAPI cache: Delete <code>Mods/.cache</code> folder</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="text-lg font-semibold text-green-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-bug"></i>
                            Common SMAPI Error Messages
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold text-white mb-2">Error Message</h5>
                                <ul class="text-xs text-slate-300 space-y-1 font-mono">
                                    <li>"Content file not found"</li>
                                    <li>"Invalid TOML syntax"</li>
                                    <li>"Duplicate NPC name"</li>
                                    <li>"Missing dependency"</li>
                                    <li>"Failed to load texture"</li>
                                </ul>
                            </div>
                            <div>
                                <h5 class="font-semibold text-white mb-2">Solution</h5>
                                <ul class="text-xs text-slate-300 space-y-1">
                                    <li>Check asset paths in TOML</li>
                                    <li>Validate TOML with online validator</li>
                                    <li>Change NPC name to be unique</li>
                                    <li>Install NPC Helper mod</li>
                                    <li>Verify image file exists and is PNG</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Compatibility -->
            <section id="compatibility" class="mb-12">
                <h3 class="text-xl font-bold text-white mb-6">Compatibility</h3>
                
                <div class="overflow-x-auto mb-6">
                    <table class="w-full doc-table">
                        <thead>
                            <tr class="bg-slate-900">
                                <th class="text-left">Feature</th>
                                <th class="text-left">Stardew 1.5</th>
                                <th class="text-left">Stardew 1.6</th>
                                <th class="text-left">Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Basic NPC Creation</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Limited</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Full</td>
                                <td>1.6 has better character data support</td>
                            </tr>
                            <tr>
                                <td>Advanced Schedules</td>
                                <td class="text-yellow-400"><i class="fas fa-exclamation-triangle"></i> Basic</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Full</td>
                                <td>Day/Season filters optimized for 1.6</td>
                            </tr>
                            <tr>
                                <td>Asset Variants</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td>Location/season-based sprites work in both</td>
                            </tr>
                            <tr>
                                <td>Dynamic Dialogue</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td>Conditional and randomized dialogue</td>
                            </tr>
                            <tr>
                                <td>Multiplayer Support</td>
                                <td class="text-yellow-400"><i class="fas fa-exclamation-triangle"></i> Limited</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Full</td>
                                <td>Full sync in 1.6 multiplayer</td>
                            </tr>
                            <tr>
                                <td>Gift Tastes System</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td>Customizable gift preferences</td>
                            </tr>
                            <tr>
                                <td>Localization</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td class="text-green-400"><i class="fas fa-check"></i> Yes</td>
                                <td>Automatic locale folder detection</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                    <h4 class="text-lg font-semibold text-white mb-4">Mod Compatibility</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="text-center p-4 bg-slate-900 rounded">
                            <div class="font-bold text-green-400 text-lg">Content Patcher</div>
                            <div class="text-slate-400 text-sm mt-2">Can coexist but may have asset conflicts</div>
                        </div>
                        <div class="text-center p-4 bg-slate-900 rounded">
                            <div class="font-bold text-green-400 text-lg">Json Assets</div>
                            <div class="text-slate-400 text-sm mt-2">Compatible - can use custom items as gifts</div>
                        </div>
                        <div class="text-center p-4 bg-slate-900 rounded">
                            <div class="font-bold text-yellow-400 text-lg">Custom NPC Mods</div>
                            <div class="text-slate-400 text-sm mt-2">May conflict if modifying same NPC data</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FAQ -->
            <section id="faq" class="mb-12">
                <h3 class="text-xl font-bold text-white mb-6">Frequently Asked Questions</h3>
                
                <div class="space-y-6">
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="font-semibold text-white mb-2">Q: Can I use NPC Helper with existing Content Patcher NPCs?</h4>
                        <p class="text-slate-400 text-sm">
                            A: Yes, but they may conflict if modifying the same NPC data. NPC Helper creates new NPCs in the game's character data, while Content Patcher usually edits existing data. It's recommended to use one system or the other for a given NPC.
                        </p>
                    </div>
                    
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="font-semibold text-white mb-2">Q: How do I make my NPC appear in a specific location?</h4>
                        <p class="text-slate-400 text-sm">
                            A: Use the <code>DefaultMap</code>, <code>DefaultX</code>, and <code>DefaultY</code> properties in your NPC TOML. The coordinates are tile coordinates (multiply by 64 for pixel coordinates). Use the <code>Schedule.toml</code> file to define daily movement patterns.
                        </p>
                    </div>
                    
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="font-semibold text-white mb-2">Q: Can NPCs have custom events or cutscenes?</h4>
                        <p class="text-slate-400 text-sm">
                            A: NPC Helper focuses on runtime NPC creation and management. For complex events or cutscenes, you'll need to create them separately using SMAPI's event system or Content Patcher. The API allows other mods to interact with NPC Helper NPCs.
                        </p>
                    </div>
                    
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="font-semibold text-white mb-2">Q: How do I update an existing NPC without breaking saves?</h4>
                        <p class="text-slate-400 text-sm">
                            A: NPC definitions are loaded at runtime each time the game starts. You can update TOML files, assets, or add new features, and they'll be applied when players reload their game. However, changing an NPC's <code>Name</code> property will create a new NPC and may break existing friendships.
                        </p>
                    </div>
                    
                    <div class="bg-slate-950 rounded-lg border border-slate-800 p-6">
                        <h4 class="font-semibold text-white mb-2">Q: What's the performance impact of many NPCs?</h4>
                        <p class="text-slate-400 text-sm">
                            A: NPC Helper is optimized for performance. Each NPC has minimal overhead when not on screen. The main impact comes from asset loading and schedule execution. For large numbers of NPCs (50+), consider spreading them across different content packs or using simplified schedules.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="border-t border-slate-800 pt-8 mt-12 text-center text-slate-500 text-sm">
                <p>NPC Helper Documentation v2.1 - Based on actual code from v1.0.1</p>
                <p class="mt-2">
                    <i class="fas fa-copyright mr-1"></i> 2026 TamKungZ_. 
                    Stardew Valley is <i class="fas fa-copyright mr-1"></i> ConcernedApe.
                    NPC Helper is licensed under All Right Reserve.
                </p>
                <div class="mt-4 flex justify-center gap-4">
                    <a href="https://www.nexusmods.com/stardewvalley/mods/41303" target="_blank" 
                       class="text-slate-400 hover:text-white transition flex items-center gap-2">
                        <i class="fas fa-download"></i>
                        NexusMods
                    </a>
                    <a href="https://github.com/tamkungz/npc-helper" target="_blank" 
                       class="text-slate-400 hover:text-white transition flex items-center gap-2">
                        <i class="fab fa-github"></i>
                        GitHub
                    </a>
                </div>
            </footer>
        </main>
    </div>
</div>

<script>
    /* =============================
       Syntax Highlight
    ============================== */
    hljs.highlightAll();

    /* =============================
       Copy Button
    ============================== */
    document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', async function () {
            const targetId = this.getAttribute('data-target');
            const codeElement = document.getElementById(targetId);
            if (!codeElement) return;

            try {
                const textToCopy = codeElement.textContent;
                await navigator.clipboard.writeText(textToCopy);

                const originalText = this.textContent;
                this.textContent = 'Copied!';
                this.style.background = 'rgba(34, 197, 94, 0.2)';
                this.style.borderColor = '#22c55e';

                setTimeout(() => {
                    this.textContent = originalText;
                    this.style.background = '';
                    this.style.borderColor = '';
                }, 2000);
            } catch (err) {
                console.error(err);
                this.textContent = 'Failed!';
                this.style.background = 'rgba(239, 68, 68, 0.2)';
                this.style.borderColor = '#ef4444';

                setTimeout(() => {
                    this.textContent = 'Copy';
                    this.style.background = '';
                    this.style.borderColor = '';
                }, 2000);
            }
        });
    });

    /* =============================
       Sidebar Active Helper
    ============================== */
    let isManualScroll = false;

    function setActiveLinkById(id) {
        document.querySelectorAll('aside a').forEach(a => {
            a.classList.remove('bg-slate-800', 'text-white');
            a.classList.add('hover:bg-slate-800', 'hover:text-white');
        });

        const link = document.querySelector(`aside a[href="#${id}"]`);
        if (link) {
            link.classList.add('bg-slate-800', 'text-white');
            link.classList.remove('hover:bg-slate-800', 'hover:text-white');
        }
    }

    /* =============================
       Smooth Scroll + Hash
    ============================== */
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;

            const targetElement = document.querySelector(targetId);
            if (!targetElement) return;

            e.preventDefault();
            isManualScroll = true;

            const headerHeight = document.querySelector('header')?.offsetHeight || 0;
            const targetPosition =
                targetElement.getBoundingClientRect().top +
                window.pageYOffset -
                headerHeight -
                20;

            setActiveLinkById(targetElement.id);
            history.pushState(null, '', `#${targetElement.id}`);

            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });

            setTimeout(() => {
                isManualScroll = false;
            }, 600);
        });
    });

    /* =============================
       Intersection Observer
    ============================== */
    const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -70% 0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver(entries => {
        if (isManualScroll) return;

        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.id;
                setActiveLinkById(id);
                history.replaceState(null, '', `#${id}`);
            }
        });
    }, observerOptions);

    document.querySelectorAll('section[id]').forEach(section => {
        observer.observe(section);
    });

    /* =============================
       Load With Hash (Refresh / Share)
    ============================== */
    window.addEventListener('load', () => {
        const hash = window.location.hash;
        if (!hash) return;

        const target = document.querySelector(hash);
        if (!target) return;

        const headerHeight = document.querySelector('header')?.offsetHeight || 0;
        const targetPosition =
            target.getBoundingClientRect().top +
            window.pageYOffset -
            headerHeight -
            20;

        setActiveLinkById(target.id);

        window.scrollTo({
            top: targetPosition,
            behavior: 'instant'
        });
    });

    /* =============================
       Print Style
    ============================== */
    const style = document.createElement('style');
    style.textContent = `
        @media print {
            .copy-btn,
            aside,
            header .flex-wrap:last-child,
            footer div {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
            }

            .code-block-wrapper pre {
                border: 1px solid #ccc !important;
                background: #f5f5f5 !important;
                color: #333 !important;
            }
        }
    `;
    document.head.appendChild(style);
</script>

</body>
</html>
